{
  "bool": {
    "should": [
        {
          "match_phrase": {
            "_all": "{{ classification.name }}"
          }
        }
      {% for keyword in classification.cleaned_synonyms %},{
        "match_phrase": {
          "_all": "{{ keyword|escapejs }}"
        }
      }{% endfor %}
    ],
    "minimum_should_match": "1",
    "must_not": [
      {% for keyword in classification.cleaned_antonyms %}{
        "match_phrase": {
          "_all": "{{ keyword|escapejs }}"
        }
      }{% if not forloop.last %},{% endif %}{% endfor %}
    ]
  }
}
